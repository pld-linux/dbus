--- dbus-0.11/configure.in.orig	Thu Aug 28 10:57:36 2003
+++ dbus-0.11/configure.in	Thu Aug 28 11:01:51 2003
@@ -228,8 +228,8 @@
 fi
 
 #### Various functions
-AC_CHECK_LIB(socket,socket)
-AC_CHECK_FUNC(gethostbyname,,[AC_CHECK_LIB(nsl,gethostbyname)])
+AC_SEARCH_LIBS(socket,socket)
+AC_CHECK_FUNC(gethostbyname,,[AC_SEARCH_LIBS(gethostbyname,nsl)])
 
 AC_CHECK_FUNCS(vsnprintf vasprintf nanosleep usleep poll setenv unsetenv socketpair getgrouplist)
 
@@ -1083,7 +1083,7 @@
 
 if test x$enable_x11 = xyes ; then
    AC_DEFINE(DBUS_BUILD_X11,1,[Build X11-dependent code])
-   DBUS_X_LIBS="$X_LIBS $X_PRE_LIBS -lX11 $X_EXTRA_LIBS"
+   DBUS_X_LIBS="$X_LIBS -lX11 $X_EXTRA_LIBS"
    DBUS_X_CFLAGS="$X_CFLAGS"
 else
    DBUS_X_LIBS=
